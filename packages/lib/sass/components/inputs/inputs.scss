@use "../../utilities/css-vars" as css-vars;
@use "../../utilities/functions" as fn;
@use "../../config" as config;
@use "./vars" as vars;

$prefix: config.$class-prefix;

// Form field wrapper
.#{$prefix}-form-field {
  position: relative;
  padding-top: fn.to-rem(20px);
  padding-bottom: fn.to-rem(20px);
}

// Label
#{vars.$label-selector} {
  position: absolute;
  top: fn.to-rem(20px);
  left: fn.to-rem(0px);

  transition: 0.2s ease all;
  color: css-vars.get-var("c-gray");
}

// Label when input is focused
#{vars.$input-selector}:not(:placeholder-shown) ~ #{vars.$label-selector},
#{vars.$input-selector}:focus ~ #{vars.$label-selector} {
  top: 0;
  font-size: fn.to-rem(12px);
}

// Input
#{vars.$input-selector} {
  width: 100%;
  border-top: none;
  border-right: none;
  border-left: none;
  border-bottom: 2px solid css-vars.get-var("text-color");

  padding-top: fn.to-rem(5px);
  padding-bottom: fn.to-rem(5px);

  // Disabled Input
  &:disabled {
    color: css-vars.get-var("c-gray");
    border-bottom-color: css-vars.get-var("c-gray");
    background-color: transparent;
  }
}

// Invalid Input
.#{$prefix}-form-field-invalid #{vars.$input-selector},
#{vars.$input-selector}:invalid {
  color: css-vars.get-var("c-scarlet");
  border-bottom-color: css-vars.get-var("c-scarlet");
}

@mixin invalid-hint {
  color: css-vars.get-var("c-scarlet");
  background-color: transparent;
  margin-top: 0;
}

// Hint
.#{$prefix}-form-field-hint[aria-errormsg],
.#{$prefix}-form-field-hint[aria-describedby] {
  background-color: css-vars.get-var("c-gorse-20");
  color: css-vars.get-var("text-color");
  padding: fn.to-rem(8px) fn.to-rem(4px);
  margin-top: fn.to-rem(8px);

  // Invalid Hint
  .#{$prefix}-form-field-invalid &,
  #{vars.$input-selector}:invalid ~ & {
    @include invalid-hint;
  }
} 

.#{$prefix}-form-field-hint-invalid[aria-errormsg],
.#{$prefix}-form-field-hint-invalid[aria-describedby] {
  @include invalid-hint;
}
